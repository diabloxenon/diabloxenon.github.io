<!DOCTYPE html>
<html lang="en">

<head>
    

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="/favicon.ico" type="image/x-icon">



<title>Sizes 101 - diabloxenon | nmnx.org</title>
<meta property="og:title" content="Sizes 101 - diabloxenon | nmnx.org">
<meta property="twitter:title" content="Sizes 101 - diabloxenon | nmnx.org">


<meta name="description" content="Sizes are an important topic to discuss, because at the end of the day while creating some arbitrary data structure you are going to be in trouble if dealing with FFIs or foreign interfaces. What I have done here is to preassign few data types that I use frequently.
">
<meta property="og:description" content="Sizes are an important topic to discuss, because at the end of the day while creating some arbitrary data structure you are going to be in trouble if dealing with FFIs or foreign interfaces. What I have done here is to preassign few data types that I use frequently.
">
<meta property="twitter:description" content="Sizes are an important topic to discuss, because at the end of the day while creating some arbitrary data structure you are going to be in trouble if dealing with FFIs or foreign interfaces. What I have done here is to preassign few data types that I use frequently.
">


<meta property="og:url" content="https://nmnx.org/journal/101/sizes-101/">
<meta property="og:locale" content="en-UK">
<meta property="og:image" content="">
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:image" content="">
<meta name="twitter:site" content="https://infosec.exchange/@diabloxenon">
<meta name="twitter:creator" content="@diabloxenon">




    <link rel="stylesheet" href="/xeno.css"
        integrity="sha512-6G+eZslR8gMCQy/XuOf5qRlTAzjBYF0IdgMrRrCcrOlELvQFIDaxOg0GlcPNQQpTVXlPBUf065O3U9c6VK46Eg==">
</head>

<body class="xeno">
    
<div class="buckt">
    <header class="navbar row">
        <div class="col-1 col-sm-12 row">
            <div class="col-3 col-sm-12" style="display: inline-flex;"><a
                    href="https:&#x2F;&#x2F;nmnx.org">diabloxenon</a>:~#&nbsp;
                <input id="search" placeholder="find stuff" autofocus></input>
            </div>
        </div>
        <nav class="navlinks col-5 col-sm-12 row">
            <ul class="group col-8 col-sm-12">
                
                <li><a class=""
                         href="https:&#x2F;&#x2F;nmnx.org&#x2F;awards"
                        title="awards" rel="nofollow noreferrer">/awards</a></li>
                
                <li><a class=""
                         href="https:&#x2F;&#x2F;nmnx.org&#x2F;journal"
                        title="journal" rel="nofollow noreferrer">/journal</a></li>
                
                <li><a class=""
                         href="https:&#x2F;&#x2F;nmnx.org&#x2F;dev"
                        title="dev" rel="nofollow noreferrer">/dev</a></li>
                
                <li><a class=""
                         href="https:&#x2F;&#x2F;nmnx.org&#x2F;tags"
                        title="tags" rel="nofollow noreferrer">/tags</a></li>
                
            </ul>
            <ul class="social col-4 col-sm-12">
                
                <li>

                    <a href="https://github.com/diabloxenon" target="_blank" rel="nofollow noreferrer"><img class="img-icon"
                            src="&#x2F;icons&#x2F;github.svg" alt="Github"></a>
                </li>
                
                <li>

                    <a href="https://gitlab.com/diabloxenon" target="_blank" rel="nofollow noreferrer"><img class="img-icon"
                            src="&#x2F;icons&#x2F;gitlab.svg" alt="Gitlab"></a>
                </li>
                
                <li>

                    <a href="https://infosec.exchange/@xld" target="_blank" rel="nofollow noreferrer me"><img class="img-icon"
                            src="&#x2F;icons&#x2F;mastodon.svg" alt="Mastodon"></a>
                </li>
                
            </ul>
        </nav>
    </header>
</div>


    
<div class="buckt">
    <div class="search-results">
        <h1>Search Results</h1>
        <noscript>Enable Javascript to use the search feature of this journal.</noscript>
        <ul class="search-results__items"></ul>
        <hr />
    </div>
</div>


    
<article class="buckt">
    <h1>Sizes 101</h1>
    <div class="title row">
        <div class="date col-6 col-sm-12">
            <div class="pub">
                <img class="img-icon" src="/icons/publish.svg" alt="Date">
                Apr 07, 2021
            </div>
            
        </div>
        <div class="col-6 col-sm-12">
            <div class="time">
                <img class="img-icon" src="/icons/time.svg" alt="Date">
                2
                minutes
            </div>
            <ul class="tags">
                
                <br />
                
                <li><a href="https://nmnx.org/tags/rust/">
                        <div class="tagid">Rust</div>
                    </a></li>
                
                <li><a href="https://nmnx.org/tags/101/">
                        <div class="tagid">101</div>
                    </a></li>
                
                <li><a href="https://nmnx.org/tags/structs/">
                        <div class="tagid">Structs</div>
                    </a></li>
                
                
            </ul>
        </div>
    </div>
    <div class="content">
        
        <p>Sizes are an important topic to discuss, because at the end of the day while creating some arbitrary data structure you are going to be in trouble if dealing with FFIs or foreign interfaces. What I have done here is to preassign few data types that I use frequently.</p>
<span id="continue-reading"></span>
<p>Let's start with a simple binary. Suppose, you are going to create a very light structure with predicable memory size, we will call it <code>Baby</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Baby</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
    <span class="z-variable z-other z-member z-rust">head</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">bool</span>,
    <span class="z-variable z-other z-member z-rust">limbs</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">u8</span>
</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>The problem arises here is we do not know the size of this structure at the runtime. Now, there are literally so many solutions to this problem but the key tip here, for this is to simple use the Rust's builtin library <code>std::mem</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
    <span class="z-storage z-type z-rust">let</span> size_obj <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">mem<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">size_of<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>Baby<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
    <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Your baby is <span class="z-constant z-other z-placeholder z-rust">{}</span> long. Such cuteness!<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> size_obj<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>Try this and you will get the size for the Baby. Doesn’t matter if its a baby of Human or a Dog or a Tiger. Size does matter, that's what she said 😆</p>
<p>If you like this tip, then check out my other entries of this series <a href="/journal/101/">here</a></p>
<p>Or if you love Rust language like I do then read my entries <a href="/tags/rust">here</a></p>

    </div>
</article>


    
<div class="footer">
    <div class="buckt row">
        <div class="copy col-4 col-sm-12">
            echo (C) 2023&nbsp;<a href="https://nmnx.org" target="_blank"
                rel="nofollow noreferrer">Naman
                Bishnoi</a>&nbsp;| cat
        </div>
        <ul class="links col-8 col-sm-12">
            <li><a href="mailto:me@nmnx.org" target="_blank" title="me@nmnx.org"
                    rel="nofollow noreferrer">me@nmnx.org</a></li>
            
            <li><a class=""
                     href="https:&#x2F;&#x2F;nmnx.org&#x2F;about"
                    title="about" rel="nofollow noreferrer">/about</a></li>
            
            <li><a class=""
                     href="https:&#x2F;&#x2F;nmnx.org&#x2F;donate"
                    title="donate" rel="nofollow noreferrer">/donate</a></li>
            
            <li><a class=""
                     href="https:&#x2F;&#x2F;nmnx.org&#x2F;credits"
                    title="credits" rel="nofollow noreferrer">/credits</a></li>
            
            <li><a class=""
                     href="https:&#x2F;&#x2F;nmnx.org&#x2F;privacy"
                    title="privacy" rel="nofollow noreferrer">/privacy</a></li>
            
            <li><a class=""
                     href="https:&#x2F;&#x2F;nmnx.org&#x2F;pgp"
                    title="pgp" rel="nofollow noreferrer">/pgp</a></li>
            
            <li><a class=""
                     href="https:&#x2F;&#x2F;nmnx.org&#x2F;#"
                    title="top" rel="nofollow noreferrer">/top</a></li>
            
            <li>
                <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"
                    title="Creative Commons License" rel="nofollow noreferrer">
                    <img class="img-icon" src="/icons/cc.svg">
                    <img class="img-icon" src="/icons/by.svg">
                    <img class="img-icon" src="/icons/nc.svg">
                    <img class="img-icon" src="/icons/sa.svg">
                </a>
            </li>
            <!-- "/ARFR6J0=" -->
        </ul>
    </div>
</div>


    <script type="text/javascript" src="/elasticlunr.min.js"></script>
    <script type="text/javascript" src="/search_index.en.js"></script>
    <script type="text/javascript" src="/search.js"></script>
</body>

</html>